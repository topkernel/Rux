# 调试档案（历史文档）

本目录包含项目开发过程中的历史调试记录，这些文档已归档，仅供参考。

## 📁 归档文档

### 内存管理调试

#### [MMU 调试记录](mmu-debug.md)
**归档时间**：2025-02-05
**内容**：RISC-V Sv39 MMU 使能过程中的调试记录
- 页表初始化
- MMU 映射问题
- 访问异常调试
- satp CSR 配置

**状态**：✅ MMU 已成功使能并运行

**相关文档**：
- [RISC-V 架构文档](../architecture/riscv64.md)
- [启动流程](../architecture/boot.md)

### 中断和多核调试

#### [GIC+SMP 调试记录](gic-smp.md)
**归档时间**：2025-02-05
**内容**：ARM64 GICv3 中断控制器和 SMP 调试
- GICv3 初始化
- SGI（核间中断）配置
- PSCI 启动次核
- 中断路由

**状态**：✅ ARM64 SMP 已验证通过

**相关文档**：
- [开发路线图](../progress/roadmap.md) - Phase 5

#### [PSCI 调试记录](pscidebug.md)
**归档时间**：2025-02-05
**内容**：ARM64 PSCI（Power State Coordination Interface）调试
- PSCI 调用约定
- 次核启动流程
- CPU_ON/CPU_OFF 操作
- 错误处理

**状态**：✅ PSCI 已成功集成

**相关文档**：
- [开发路线图](../progress/roadmap.md) - Phase 5

#### [IPI 测试记录](ipi-testing.md)
**归档时间**：2025-02-05
**内容**：核间中断（Inter-Processor Interrupt）测试
- IPI 类型定义
- 测试用例
- 性能测试
- 稳定性验证

**状态**：✅ IPI 已在 ARM64 和 RISC-V 上验证

**相关文档**：
- [开发路线图](../progress/roadmap.md) - Phase 10.1

### 用户程序实现

#### [Linux 风格用户程序实现](linux-style-user-exec.md)
**实现时间**：2025-02-09
**内容**：使用 Linux 单页表方法实现用户程序执行的完整过程
- 设计决策：单页表 vs trampoline
- 核心技术：U-bit 权限控制、sret 语义、sscratch 使用
- 实现步骤：Trap 处理、模式切换、ELF 加载、系统调用
- 关键代码：trap.S、usermode_asm.S、syscall.rs
- 测试验证：用户程序执行和系统调用
- 性能分析：页表切换对比


**状态**：✅ execve 已实现并测试通过

**相关文档**：
- [用户程序方案](../development/user-programs.md)
- [开发路线图](../progress/roadmap.md) - Phase 11

## 📖 如何使用这些文档

### 学习调试方法

这些文档记录了实际的问题调试过程，适合学习：

1. **问题定位方法**
   - 如何分析异常信息
   - 如何使用调试工具
   - 如何缩小问题范围

2. **解决方案思路**
   - 对比 Linux 内核实现
   - 参考架构手册
   - 系统性的验证步骤

3. **调试技巧**
   - 添加调试输出
   - 使用 GDB
   - QEMU 调试选项

### 参考价值

虽然这些文档描述的问题已经解决，但仍然有价值：

- ✅ **理解系统内部工作原理**
- ✅ **学习调试方法论**
- ✅ **了解架构细节**
- ✅ **参考类似问题的解决思路**

## ⚠️ 注意事项

1. **代码可能已过时**：这些文档记录的是历史调试过程，相关代码可能已经重构
2. **问题已解决**：文档中描述的问题已经修复，不要作为当前系统的参考
3. **仅作学习用途**：这些文档主要用于学习，不是当前系统的文档

## 🔄 返回主文档

- **[文档首页](../README.md)** - 返回文档中心
- **[快速开始](../guides/getting-started.md)** - 当前系统使用指南
- **[开发路线图](../progress/roadmap.md)** - 查看最新开发状态

---

最后更新：2025-02-09
